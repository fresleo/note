**

## 启用内存

**

    sudo fallocate -l 2G /swapfile

设置正确权限

    sudo chmod 600 /swapfile

格式化为 swap 类型：

    sudo mkswap /swapfile

启用 swap 文件：

    sudo swapon /swapfile


确认是否启用成功：

    swapon --show
    free -h


让 swap 文件开机自动启用

编辑 /etc/fstab：

    sudo nano /etc/fstab


添加这一行到文件最后：

    /swapfile none swap sw 0 0

## 增加虚拟内存
一、先查看当前虚拟内存情况

    free -h
或：

    swapon --show
    
    
###**方法1：增加现有 swap 文件的大小**

假设当前 swap 是 `/swapfile`，想从 2G → 4G：


-   **关闭当前 swap：**
    
    `sudo swapoff /swapfile` 
    
-   **调整文件大小（重新分配空间）**
    
    `sudo fallocate -l 4G /swapfile` 
    
    如果系统不支持 `fallocate`，改用：
    
    `sudo dd  if=/dev/zero of=/swapfile bs=1M count=4096` 
    
-   **修改权限（安全性要求）**
    
    `sudo chmod 600 /swapfile` 
    
-   **重新格式化为 swap**
    
    `sudo mkswap /swapfile` 
    
-   **重新启用 swap**
    
    `sudo swapon /swapfile` 
    
-   **验证是否生效**
    
    `free -h` 
    
-   **让它重启后自动挂载**  
    确认 `/etc/fstab` 中有以下行：
    
    `/swapfile none swap sw 0 0`

### **方法2：增加额外的 swap 文件（推荐扩展方式）**

如果你不想动原来的 `/swapfile`：

1.  **创建新文件，例如 `/swapfile2`：**
    
    `sudo fallocate -l 2G /swapfile2` 
    
2.  **设置权限与格式化：**
    
    sudo chmod 600 /swapfile2
    
    sudo mkswap /swapfile2
    
3.  **启用它：**
    
    `sudo swapon /swapfile2` 
    
4.  **验证结果：**
    
    `swapon --show` 
    
    输出应类似：
    
    `NAME        TYPE SIZE USED PRIO
    /swapfile   file 2G   0B   -2
    /swapfile2  file 2G   0B   -3` 
    
5.  **永久生效：**  
    在 `/etc/fstab` 末尾添加：
    
    `/swapfile2 none swap sw 0 0`

<!--stackedit_data:
eyJoaXN0b3J5IjpbMTIwNDc4MDk2OCw2MzYzMzAwOF19
-->